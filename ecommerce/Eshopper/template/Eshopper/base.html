<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>{%block title%}Home | E-Shopper{%endblock title%}</title>
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/prettyPhoto.css' %}" rel="stylesheet">
    <link href="{% static 'css/price-range.css' %}" rel="stylesheet">
    <link href="{% static 'css/animate.css' %}" rel="stylesheet">
	<link href="{% static 'css/main.css' %}" rel="stylesheet">
	<link href="{% static 'css/responsive.css' %}" rel="stylesheet">
	
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="{% static 'images/ico/favicon.ico' %}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{% static 'images/ico/apple-touch-icon-144-precomposed.png' %}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{% static 'images/ico/apple-touch-icon-114-precomposed.png' %}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{% static 'images/ico/apple-touch-icon-72-precomposed.png' %}">
    <link rel="apple-touch-icon-precomposed" href="{% static 'images/ico/apple-touch-icon-57-precomposed.png' %}">
	<link rel="stylesheet" href="{% static 'plugins/summernote/summernote-bs4.css' %}">

	<script type="text/javascript">
		var user = '{{request.user}}'

		function getToken(name) {
			let cookieValue = null;
			if (document.cookie && document.cookie !== '') {
				const cookies = document.cookie.split(';');
				for (let i = 0; i < cookies.length; i++) {
					const cookie = cookies[i].trim();
					// Does this cookie string begin with the name we want?
					if (cookie.substring(0, name.length + 1) === (name + '=')) {
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
						break;
					}
				}
			}
			return cookieValue;
		}
		const csrftoken = getToken('csrftoken');

	

	</script>
</head><!--/head-->

<body>
	<header id="header"><!--header-->
		<div class="header_top"><!--header_top-->
			<div class="container">
				<div class="row">
					<div class="col-sm-6">
						<div class="contactinfo">
							<ul class="nav nav-pills">
								<li><a href="#"><i class="fa fa-phone"></i> +2 95 01 88 821</a></li>
								<li><a href="#"><i class="fa fa-envelope"></i> info@domain.com</a></li>
								
							</ul>
						</div>
					</div>
					<div class="col-sm-6">
						<div class="social-icons pull-right">
							<ul class="nav navbar-nav">
								<li><a href="#"><i class="fa fa-facebook"></i></a></li>
								<li><a href="#"><i class="fa fa-twitter"></i></a></li>
								<li><a href="#"><i class="fa fa-linkedin"></i></a></li>
								<li><a href="#"><i class="fa fa-dribbble"></i></a></li>
								<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header_top-->
		
		<div class="header-middle"><!--header-middle-->
			<div class="container">
				<div class="row">
					<div class="col-sm-4">
						<div class="logo pull-left">
							<a href="/"><img src="{% static 'images/home/logo.png' %}" alt="" /></a>
						</div>
						
					</div>
					<div class="col-sm-8">
						<div class="shop-menu pull-right">
							<ul class="nav navbar-nav">
								<li><a href="/account/"><i class="fa fa-user"></i> Account</a></li>
								<li><a href="/cart/wishlist/"><i class="fa fa-star"></i> Wishlist </a></li>
								{%if cartitems%}
								<li><a href="/cart/checkout/"><i class="fa fa-crosshairs"></i> Checkout</a></li>
								{%else%}
								
								{%endif%}

								<li><a href="/cart/myorder/"><i class="fa fa-crosshairs"></i> My Order</a></li>
								<li><a href="/cart/"><i class="fa fa-shopping-cart">
									<b><sup> {{cartitems}} </sup></b> 
								</i> Cart</a></li>
								{%if user.is_authenticated%}
								<li><a href="/logout/"><i class="fa fa-lock"></i> Logout <small>{{request.user}}</small></a></li>

								{%else%}
								<li><a href="/login/"><i class="fa fa-lock"></i> Login <small>Guest</small></a></li>
								{%endif%}

								
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header-middle-->
	
		<div class="header-bottom"><!--header-bottom-->
			<div class="container">
				<div class="row">
					<div class="col-sm-9">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>
						</div>
						<div class="mainmenu pull-left">
							<ul class="nav navbar-nav collapse navbar-collapse">
								<li><a href="/" class="active">Home</a></li>
								<li class="dropdown"><a href="#">Shop<i class="fa fa-angle-down"></i></a>
                                    <ul role="menu" class="sub-menu">
                                        <li><a href="/product/">Products</a></li>
										<li><a href="/product/details/">Product Details</a></li> 
										{%if cartitmes %}
										<li><a href="/cart/checkout/">Checkout</a></li> 
										{%else%}
										{%endif%}
										<li><a href="/cart/">Cart</a></li> 
										<li><a href="/login/">Login</a></li> 
                                    </ul>
                                </li> 
								<li class="dropdown"><a href="#">Blog<i class="fa fa-angle-down"></i></a>
                                    <ul role="menu" class="sub-menu">
                                        <li><a href="blog.html">Blog List</a></li>
										<li><a href="blog-single.html">Blog Single</a></li>
                                    </ul>
                                </li> 
								
								<li><a href="/contactus/">Contact</a></li>
								<li><a href="/pages/page/">About Us</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-3">
						<div class="search_box pull-right">
							<input type="text" placeholder="Search"/>
						</div>
					</div>
				</div>
			</div>
		</div><!--/header-bottom-->
	</header><!--/header-->


{%block content%}

{%endblock content%}


<footer id="footer"><!--Footer-->
	<div class="footer-top">
		<div class="container">
			<div class="row">
				<div class="col-sm-2">
					<div class="companyinfo">
						<h2><span>e</span>-shopper</h2>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,sed do eiusmod tempor</p>
					</div>
				</div>
				<div class="col-sm-7">
					<div class="col-sm-3">
						<div class="video-gallery text-center">
							<a href="#">
								<div class="iframe-img">
									<img src="{% static 'images/home/iframe1.png' %}" alt="" />
								</div>
								<div class="overlay-icon">
									<i class="fa fa-play-circle-o"></i>
								</div>
							</a>
							<p>Circle of Hands</p>
							<h2>24 DEC 2014</h2>
						</div>
					</div>
					
					<div class="col-sm-3">
						<div class="video-gallery text-center">
							<a href="#">
								<div class="iframe-img">
									<img src="{% static 'images/home/iframe2.png' %}" alt="" />
								</div>
								<div class="overlay-icon">
									<i class="fa fa-play-circle-o"></i>
								</div>
							</a>
							<p>Circle of Hands</p>
							<h2>24 DEC 2014</h2>
						</div>
					</div>
					
					<div class="col-sm-3">
						<div class="video-gallery text-center">
							<a href="#">
								<div class="iframe-img">
									<img src="{% static 'images/home/iframe3.png' %}" alt="" />
								</div>
								<div class="overlay-icon">
									<i class="fa fa-play-circle-o"></i>
								</div>
							</a>
							<p>Circle of Hands</p>
							<h2>24 DEC 2014</h2>
						</div>
					</div>
					
					<div class="col-sm-3">
						<div class="video-gallery text-center">
							<a href="#">
								<div class="iframe-img">
									<img src="{% static 'images/home/iframe4.png' %}" alt="" />
								</div>
								<div class="overlay-icon">
									<i class="fa fa-play-circle-o"></i>
								</div>
							</a>
							<p>Circle of Hands</p>
							<h2>24 DEC 2014</h2>
						</div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="address">
						<img src="{% static 'images/home/map.png' %}" alt="" />
						<p>505 S Atlantic Ave Virginia Beach, VA(Virginia)</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="footer-widget">
		<div class="container">
			<div class="row">
				<div class="col-sm-2">
					<div class="single-widget">
						<h2>Service</h2>
						<ul class="nav nav-pills nav-stacked">
							<li><a href="">Online Help</a></li>
							<li><a href="">Contact Us</a></li>
							<li><a href="">Order Status</a></li>
							<li><a href="">Change Location</a></li>
							<li><a href="">FAQ’s</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-2">
					<div class="single-widget">
						<h2>Quock Shop</h2>
						<ul class="nav nav-pills nav-stacked">
							<li><a href="">T-Shirt</a></li>
							<li><a href="">Mens</a></li>
							<li><a href="">Womens</a></li>
							<li><a href="">Gift Cards</a></li>
							<li><a href="">Shoes</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-2">
					<div class="single-widget">
						<h2>Policies</h2>
						<ul class="nav nav-pills nav-stacked">
							<li><a href="">Terms of Use</a></li>
							<li><a href="">Privecy Policy</a></li>
							<li><a href="">Refund Policy</a></li>
							<li><a href="">Billing System</a></li>
							<li><a href="">Ticket System</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-2">
					<div class="single-widget">
						<h2>About Shopper</h2>
						<ul class="nav nav-pills nav-stacked">
							<li><a href="">Company Information</a></li>
							<li><a href="">Careers</a></li>
							<li><a href="">Store Location</a></li>
							<li><a href="">Affillate Program</a></li>
							<li><a href="">Copyright</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-3 col-sm-offset-1">
					<div class="single-widget">
						<h2>About Shopper</h2>
						<form method="post" action="{% url 'subscription' %}">
							{% csrf_token %}
					  
							<div class="form-group">
							  <label>Subscribe to get the latest Articles</label> <br>
							  <input type="email" name="email" placeholder="Enter Email to Subscribe">
							  <button class="btn btn-info" type="submit">Submit</button>
							</div>
					  
						  </form>
					</div>
				</div>
				
			</div>
		</div>
	</div>
	
	<div class="footer-bottom">
		<div class="container">
			<div class="row">
				<p class="pull-left">Copyright © 2013 E-SHOPPER Inc. All rights reserved.</p>
				<p class="pull-right">Designed by <span><a target="_blank" href="http://www.themeum.com">Themeum</a></span></p>
			</div>
		</div>
	</div>
	
</footer><!--/Footer-->
<script src="https://www.paypal.com/sdk/js?client-id=AeOpovtXVN-Y2eIWp4ZlUavP3PXOM5V4oxtP2gJGDIGR7UhD5DmbtgCNN-L24JD3KHFQiuxUBF97hsGv&currency=USD"></script>

<script>

	// Render the PayPal button into #paypal-button-container
	var total = "{{order.set_grand_total}}"
	paypal.Buttons({

		style:{
			color: 'blue',
			shape:  'rect',

		},

		// Set up the transaction
		createOrder: function(data, actions) {
			return actions.order.create({
				purchase_units: [{
					amount: {
						value: parseFloat(total).toFixed(2)
					}
				}]
			});
		},

		// Finalize the transaction
		onApprove: function(data, actions) {
			return actions.order.capture().then(function(orderData) {
				// Successful capture! For demo purposes:
				console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
				var transaction = orderData.purchase_units[0].payments.captures[0];
				$.ajax({
					url : '/cart/processOrder/',
					method : 'POST', 
					data :{
						'transaction_id':transaction.id,
						'csrfmiddlewaretoken':csrftoken,
						'total':total
					},
					success:function(response){
						alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');
						submitFormData()

					}
				})
				
				
				// Replace the above to show a success message within this page, e.g.
				// const element = document.getElementById('paypal-button-container');
				// element.innerHTML = '';
				// element.innerHTML = '<h3>Thank you for your payment!</h3>';
				// Or go to another URL:  actions.redirect('thank_you.html');
			});
		}


	}).render('#paypal-button-container');



	document.getElementById('make-payment-button').addEventListener('click',function(e){
      
		submitFormData()
	
	 })
	 document.getElementById('id_make-payment').addEventListener('click',function(e){
		
		 submitFormData()
	 })

	function submitFormData(){
		var total = "{{order.set_grand_total}}"
		
		

		console.log('payment button clicked')

		 var userFormData = {
			 'total' : total,
		 }
	 

	 var url = '/cart/processOrder/'

	 fetch(url,{

		 method:'POST',
		 headers:{
			 'Content-Type':'application/json',
			 'X-CSRFToken':csrftoken
		 },
		 body:JSON.stringify({'userinfo': userFormData}),
	 })
	 .then((response)=> response.json())
	 .then((data)=>{

		 console.log('success:',data);
		 alert('ORDER PLACED')
	 })
 }







</script>   




<script src="{% static 'js/jquery.js' %}"></script>
<script>
//this is for account
$(document).ready(function(){
    $('#check-address').click(function(){
        if($('#check-address').is(":checked")){
          $('#billing_number').val($('#shpping_nuber').val());
          $('#billing_add1').val($('#shipping_add1').val());
          $('#billing_add2').val($('#shipping_add2').val());
          $('#billing_post').val($('#shipping_post').val());
          $('#billing_state').val($('#shipping_state').val());
          $('#billing_country').val($('#shipping_country').val());
          $('#billing_city').val($('#shipping_city').val());
		  $('#id_email').val($('#id_ship_email').val());
        }else
        {
            $('#billing_number').val("");
            $('#billing_add1').val("");
            $('#billing_add2').val("");
            $('#billing_post').val("");
            $('#billing_state').val("");
            $('#billing_country').val("");
            $('#billing_city').val("");
			$('#id_email').val("");

        };
    });
});




</script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/jquery.scrollUp.min.js' %}"></script>
<script src="{% static 'js/price-range.js' %}"></script>
<script src="{% static 'js/jquery.prettyPhoto.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script>

var wishlistbtn = document.getElementsByClassName("wishlist-added")
for(var i =0; i< wishlistbtn.length; i++)
{
    wishlistbtn[i].addEventListener('click',function(){
        var productId = this.dataset.product
        var action = this.dataset.action

        console.log('productId:', productId, 'action:', action)

		var url = '/cart/updatewishlist/'

		fetch(url, {
			method:'POST',
			headers:{

				"Content-Type":"application/json",
				"x-CSRFToken":csrftoken,
			},
			body:JSON.stringify({'productId':productId,'action':action})
				
		})
		.then(response => response.json())
        .then(data => console.log(data))
        location.reload()


       
    })
}

</script>

<script src="{% static 'js/cart.js' %}"></script>